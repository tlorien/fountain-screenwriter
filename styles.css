/*───────────────────────────────────────────────────────────────*
| Screenwriter Mode  ·  Studio Layout v4.2                      |
*───────────────────────────────────────────────────────────────*/

/* 0 · Typeface & base */
@import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
.scr-page.cm-editor {
  font-family: "Courier Prime","Courier New",monospace !important;
  font-size: clamp(10pt, var(--scr-scale,1)*12pt, 12pt) !important;
  line-height: 1.3;
}

/* 1 · Centred virtual page */
.scr-page .cm-content {
  max-width: clamp(60ch, 72ch + 6ch * ((100vw - 480px)/120px), 78ch);
  margin: 0 auto !important;
  padding-inline: 2ch;
}

/* 2 · Tab-stops */
:root {
  --tab-0: 0ch;
  --tab-1: 12ch;
  --tab-2: 22ch;
  --tab-3: 70ch;
}

/* 3 · Block positions */
.scr-page .cm-line.scr-scene,
.scr-page .cm-line.scr-action,
.scr-page .cm-line[class|="scr-sec"] {
  padding-left: var(--tab-0) !important;
}
.scr-page .cm-line.scr-char,
.scr-page .cm-line.scr-char-dual {
  padding-left: var(--tab-2) !important;
}
.scr-page .cm-line.scr-lyric,
.scr-page .cm-line.scr-dialogue,
.scr-page .cm-line.scr-dialogue-dual,
.scr-page .cm-line.scr-paren {
  padding-left: var(--tab-1) !important;
}
.scr-page .cm-line.scr-dialogue,
.scr-page .cm-line.scr-dialogue-dual {
  padding-right: 6ch !important;
}
.scr-page .cm-line.scr-trans {
  margin-left: auto !important;
  padding-right: .2in !important;
  text-align: right !important;
  padding-left: 0 !important;
  border-left: none !important;
}

/* 3-A · Centred lines */
.scr-page .cm-line.scr-centered {
  display: flex !important;
  justify-content: center !important;
  padding: 0 !important;
}

/* 3-B · Level-1 sections */
.scr-page .cm-line.scr-sec-1 {
  text-align: center !important;
  text-decoration: underline;
}

/* 4 · Dual-dialogue bar */
.scr-page .cm-line.scr-dialogue-dual,
.scr-page .cm-line.scr-char-dual {
  border-left: 2px dashed var(--text-muted);
  padding-left: 2ch !important;
}

/* 5 · Title-page keys */
.scr-page .cm-line.scr-title,
.scr-page .cm-line.scr-credit,
.scr-page .cm-line.scr-author,
.scr-page .cm-line.scr-source,
.scr-page .cm-line.scr-draftdate,
.scr-page .cm-line.scr-contact {
  text-align: center !important;
}

/* 6 · Notes & inline marks */
.scr-page .cm-line.scr-note,
.scr-page .scr-note-inline,
.scr-page .scr-note-inline a {
  color: var(--text-faint) !important;
  text-decoration: underline dotted 1px var(--text-faint);
}
.scr-page .scr-note-inline a { pointer-events: none; }
.scr-page .scr-ext         { font-style: italic; }
.scr-page .scr-em-italic   { font-style: italic; }
.scr-page .scr-em-bold     { font-weight: bold; }
.scr-page .scr-em-bolditalic { font-style: italic; font-weight: bold; }
.scr-page .scr-em-underline { text-decoration: underline; }

/* 7 · Hover tooltip styling */
.scr-hover-tooltip {
  padding: 2px 6px;
  background: var(--background-secondary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  font-size: var(--font-small);
  opacity: 1 !important;
  animation: none !important;
  transition: none !important;
  pointer-events: none;
  z-index: 5000;
}

/* 8 · Print overrides */
@media print {
  .scr-page .cm-content { max-width: 72ch; margin: 0 auto !important; }
}

/* A · Invisible delimiters */
.scr-page .scr-hide {
  opacity: 0 !important;
  font-size: 0 !important;
  width: 0 !important;
  visibility: hidden !important;
  display: inline-block;
}

/* B · Status‐bar colours (moved from JS) */
.scr-status { color: var(--text-normal); }
.scr-status--scene_heading { color: var(--color-orange); }
.scr-status--section       { color: var(--text-accent);  }
.scr-status--character     { color: var(--interactive-accent); }
.scr-status--dialogue      { color: var(--text-normal); }
.scr-status--transition    { color: var(--text-muted); }
.scr-status--action        { color: var(--text-normal); }
.scr-status--parenthetical { color: var(--text-faint); }
/* …extend for other ColourKey entries as needed… */
